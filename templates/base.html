<!doctype html>
{% load static %}
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bootstrap demo</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
<link href="{% static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
</head>
<body>

    <header class="p-3 mb-3 border-bottom sticky-top bg-white">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="p-2 border rounded d-flex align-items-center mb-2 mb-lg-0 text-dark text-decoration-none">
                    <i class="fa fa-home"></i>
                    &nbspHome
                </a>

                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="#" class="nav-link px-2 link-primary">Overview</a></li>
                    <li><a href="#" class="nav-link px-2 link-primary">Overview</a></li>
                    <li><a href="#" class="nav-link px-2 link-primary">Overview</a></li>
                    <li><a href="#" class="nav-link px-2 link-primary">Overview</a></li>
                    <li><a href="{% url 'patient:profile' %}" class="nav-link px-2 link-primary">Profile</a></li>
                </ul>

                {% if request.user and request.user.is_authenticated and request.user.role == "doctor" and request.user.specialized_in == None %}
                <div class="fade show p-auto rounded mx-3" role="alert" style="color: #FF6363; border-left: 2px solid; border-right: 2px solid; padding: 5px 15px">
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                    <span class="mx-3">You have to add specialization in doctor.</span>
                    <a data-bs-toggle="modal" data-bs-target="#exampleModal" href="" class="border border-danger border-3 text-decoration-none rounded px-2">Add now?</a>
                </div>
                {% endif %}

                {% if request.user and request.user.is_authenticated %}
                <div class="dropdown text-end">
                    <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                        <span>Hi {{ request.user.username }}</span>
                        <img src="{% static 'img/profile.svg' %}" alt="profile" width="32" height="32" class="rounded-circle">
                    </a>
                    <ul class="dropdown-menu text-small" aria-labelledby="dropdownUser1" style="">
                    <li><a class="dropdown-item" href="#">New project...</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><a class="dropdown-item" href="{% url 'patient:profile' %}">Profile</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="{% url 'logout' %}">Sign out</a></li>
                    </ul>
                </div>
                {% else %}

                <ul class="nav col-12 col-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="{% url 'login' %}" class="btn btn-outline-success mx-3">Login</a></li>
                    <li><a href="{% url 'register' %}" class="btn btn-outline-success">Register</a></li>
                </ul>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Modal -->
    {% if request.user and request.user.is_authenticated and request.user.role == "doctor" and request.user.specialized_in == None %}
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">You can select specialisation from here</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form method="post" action="{% url 'doctor-register' request.user.id %}">
                {% csrf_token %}
                <table class="m-auto" cellpadding="5">
                    <tr class="d-flex justify-content-between align-items-center">
                        <td>I specialise in </td>
                        <td>
                            <select name="specialisation" id="" class="form-select">
                                {% for specialisation in specialisations %}
                                <option value="{{ specialisation.id }}">{{specialisation.special }}</option>
                                {% endfor %}
                            </select>
                            <small class="text-danger">{{ field.errors|striptags }}</small>
                        </td>
                    </tr>
                </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save changes</button>
          </div>

            </form>
        </div>
      </div>
    </div>
    {% endif %}
    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

    <footer class="footer mt-auto py-3 bg-light border-top border-info">
      <div class="container text-center">
        <span class="text-muted">Built with <a href="https://getbootstrap.com/" target="_blank">Bootstrap</a> and designed by <a
                href="https://github.com/sravan-kumar-ta" target="_blank">Sravan kumar</a>
        </span>
      </div>
    </footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>


<script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

<!-- Core plugin JavaScript-->
<script src="{% static 'vendor/jquery-easing/jquery.easing.min.js' %}"></script>

</body>
</html>